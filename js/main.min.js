$(document).ready(function(){function e(t){$("html, body").animate({scrollTop:$("."+t).offset().top-90},1500)}function i(){var t=$("body").width();$(".modal__overlay").addClass("modal__overlay--visible"),$(".modal__dialog").addClass("modal__dialog--visible"),$(".modal__close").removeClass("modal__close--hidden"),"open"==$(".navbar-burger").attr("data-burger")?"hidden"==$("body").css("overflow")?$("body").css({overflow:"auto"}):$("body").css({overflow:"hidden"}):"close"==$(".navbar-burger").attr("data-burger")&&$("body").css({overflow:"hidden"});var e=$("body").width()-t,i=$(".navbar__hero--transform").width();$("header").css({"padding-right":e}),$(".navbar__hero--transform").css({left:"0",transform:"translateX("+(t-i)/2+"px)"}),$("section").css({"padding-right":e}),$("footer").css({"padding-right":e})}function o(){$(".modal__overlay").removeClass("modal__overlay--visible"),$(".modal__overlay").addClass("modal__overlay--hidden"),$(".modal__close").addClass("modal__close--hidden"),setTimeout(function(){"open"==$(".navbar-burger").attr("data-burger")?"hidden"==$("body").css("overflow")?$("body").css({overflow:"auto"}):$("body").css({overflow:"hidden"}):"close"==$(".navbar-burger").attr("data-burger")&&$("body").css({overflow:"hidden"}),$("header").css({"padding-right":0}),$(".navbar__hero--transform").css({left:"50%",transform:"translateX(-50%)"}),$("section").css({"padding-right":0}),$("footer").css({"padding-right":0})},1100),setTimeout(function(){$(".modal__dialog").removeClass("modal__dialog--visible"),$(".modal__dialog").addClass("modal__dialog--hidden")},500)}function s(){"hidden"==$("body").css("overflow")?$("body").css({overflow:"auto"}):$("body").css({overflow:"hidden"}),$(".navbar-burger__item").removeClass("navbar-burger__item--active"),$(".navbar-burger__item").addClass("navbar-burger__item--hidden"),setTimeout(function(){$(".burger-modal").removeClass("burger-modal--visible"),$(".burger-modal").addClass("burger-modal--hidden")},500),$(".navbar-burger").attr("data-burger","open")}setTimeout(function(){$("head").append('<link rel="stylesheet" href="css/fonts.css" />')},200),$(".nav-list__link").on("click",function(t){t.preventDefault(),"close"==$(".navbar-burger").attr("data-burger")?(s(),setTimeout(function(){e($(t.target).attr("data-scroll"))},1e3)):"open"==$(".navbar-burger").attr("data-burger")&&e($(t.target).attr("data-scroll"))}),$(document).on("click",function(t){"modal"==$(t.target).attr("data-open")?i():"modal"==$(t.target).attr("data-close")&&o()}),$(".footer-social__list-link").on("click",function(t){t.preventDefault(),i()}),$(document).on("keydown",function(t){27==t.keyCode&&o()}),$(document).on("click",function(t){$.each(t.target.classList,function(t,e){"modal__overlay--visible"==e&&o()})}),$(".modal__form").validate({errorClass:"validate-error",messages:{theme:"Пожалуйста, выберите тему!",message:{required:"Напишите нам сообщение.."},email:{required:"Напишите email адрес.",email:"Формат для email адреса - name@domain.com"},checkbox:{required:"Поставьте галочку"}}}),$(".footer-newsletter__form").validate({errorClass:"footer-newsletter__validate-error",messages:{newsletter:{required:"Напишите email адрес.",email:"Формат для email адреса - name@domain.com"}}}),$(".modal-checkbox__input").on("click",function(t){$(".modal-checkbox__input").is(":checked")?$(".modal-checkbox__label").addClass("modal-checkbox__label--active"):$(".modal-checkbox__label").removeClass("modal-checkbox__label--active")}),$(".comments-form").validate({errorClass:"comments-form__validate-error",messages:{comment:{required:"Напишите нам сообщение..",minlength:"Минимальная длина символов - 100"}}}),$(".modal__send").on("click",function(){setTimeout(function(){$(".modal__send").attr("disabled","disabled")},50),setTimeout(function(){$(".modal__send").removeAttr("disabled")},5e3)}),$(".footer-newsletter__button").on("click",function(){setTimeout(function(){$(".footer-newsletter__button").attr("disabled","disabled")},50),setTimeout(function(){$(".footer-newsletter__button").removeAttr("disabled")},5e3)}),$(".comments-form__button").on("click",function(){setTimeout(function(){$(".comments-form__button").attr("disabled","disabled")},50),setTimeout(function(){$(".comments-form__button").removeAttr("disabled")},5e3)}),$(".navbar-burger").on("click",function(){"open"==$(this).attr("data-burger")?("hidden"==$("body").css("overflow")?$("body").css({overflow:"auto"}):$("body").css({overflow:"hidden"}),$(".navbar-burger__item").addClass("navbar-burger__item--active"),$(".navbar-burger__item").removeClass("navbar-burger__item--hidden"),$(".burger-modal").addClass("burger-modal--visible"),$(".burger-modal").removeClass("burger-modal--hidden"),$(".navbar-burger").attr("data-burger","close")):"close"==$(this).attr("data-burger")&&s()}),$(".tabs-button__item").on("click",function(){var t=$(this).attr("data-tabs");$(".tabs-item").each(function(){$(this).removeClass("tabs-item--visible"),$(this).addClass("tabs-item--hidden"),$(this).attr("data-tabs")==t&&($(this).removeClass("tabs-item--hidden"),$(this).addClass("tabs-item--visible"))}),$(".tabs-button__item").each(function(){$(this).removeClass("tabs-button__item--active"),$(this).attr("data-tabs")==t&&$(this).addClass("tabs-button__item--active")})}),$(".favorite").on("click",function(t){"normal"==$(this).attr("data-favorite")?($(this).attr("src","img/favorite-red.svg"),$(this).attr("data-favorite","red")):($(this).attr("src","img/favorite.svg"),$(this).attr("data-favorite","normal")),t.preventDefault()});new Swiper(".articles-popular__slider",{loop:!0,pagination:{el:".swiper-pagination",type:"bullets"},autoplay:{delay:5e3},simulateTouch:!1}),new Swiper(".article__slider-container",{loop:!0,keyboard:{enabled:!0},navigation:{nextEl:".article__slider-button--next",prevEl:".article__slider-button--prev"},simulateTouch:!1});$(document).on("scroll",function(){1600<$("html, body").scrollTop()?"none"==$(".arrow-up").css("display")&&$(".arrow-up").fadeIn(700):"none"!=$(".arrow-up").css("display")&&$(".arrow-up").fadeOut(700)}),$(".arrow-up").on("click",function(){$("html, body").animate({scrollTop:0},1500)}),$(".comments-top__add-comment").on("click",function(t){t.preventDefault();t=$(".comments-bottom").offset().top-115;$("html, body").animate({scrollTop:t},1e3)}),$(".comments-loading").on("click",function(){var i=$(".comments-cards").height(),o=0,s=[],a=i;function t(t){console.log(i);for(var e=0;e<t;e++)$(s[e]).css("display","flex"),a+=$(s[e]).outerHeight(!0),console.log(a);$(".comments-cards").height(i),$(".comments-cards").animate({height:a},1e3),$(".comments-loading__img").addClass("comments-loading__img--rotate"),setTimeout(function(){$(".comments-loading__img").removeClass("comments-loading__img--rotate")},2e3)}$(".comments-cards__item").each(function(t,e){$(e).is(":hidden")&&(o++,s.push(e))}),o%3==0||3<=o?t(3):o%2==0||2<=o?t(2):(o%1==0||1<=o)&&t(1)}),$(".comments-form__area").on("keyup",function(){var t;"block"==$("#comment-error").css("display")&&($(".comments-form__counter").css("display","block"),0<=(t=100-this.value.length)&&$(".comments-form__counter").text(t),t<=0&&$(".comments-form__counter").css("display","none"),t<99?$("#comment-error").css("opacity","0"):$("#comment-error").css("opacity","1"))}),setTimeout(function(){!function(r,n,l,o){function d(t,e){var i=this;"object"==typeof e&&(delete e.refresh,delete e.render,r.extend(this,e)),this.$element=r(t),!this.imageSrc&&this.$element.is("img")&&(this.imageSrc=this.$element.attr("src"));e=(this.position+"").toLowerCase().match(/\S+/g)||[];if(e.length<1&&e.push("center"),1==e.length&&e.push(e[0]),"top"!=e[0]&&"bottom"!=e[0]&&"left"!=e[1]&&"right"!=e[1]||(e=[e[1],e[0]]),this.positionX!==o&&(e[0]=this.positionX.toLowerCase()),this.positionY!==o&&(e[1]=this.positionY.toLowerCase()),i.positionX=e[0],i.positionY=e[1],"left"!=this.positionX&&"right"!=this.positionX&&(isNaN(parseInt(this.positionX))?this.positionX="center":this.positionX=parseInt(this.positionX)),"top"!=this.positionY&&"bottom"!=this.positionY&&(isNaN(parseInt(this.positionY))?this.positionY="center":this.positionY=parseInt(this.positionY)),this.position=this.positionX+(isNaN(this.positionX)?"":"px")+" "+this.positionY+(isNaN(this.positionY)?"":"px"),navigator.userAgent.match(/(iPod|iPhone|iPad)/))return this.imageSrc&&this.iosFix&&!this.$element.is("img")&&this.$element.css({backgroundImage:"url("+this.imageSrc+")",backgroundSize:"cover",backgroundPosition:this.position}),this;if(navigator.userAgent.match(/(Android)/))return this.imageSrc&&this.androidFix&&!this.$element.is("img")&&this.$element.css({backgroundImage:"url("+this.imageSrc+")",backgroundSize:"cover",backgroundPosition:this.position}),this;this.$mirror=r("<div />").prependTo(this.mirrorContainer);t=this.$element.find(">.parallax-slider"),e=!1;0==t.length?this.$slider=r("<img />").prependTo(this.$mirror):(this.$slider=t.prependTo(this.$mirror),e=!0),this.$mirror.addClass("parallax-mirror").css({visibility:"hidden",zIndex:this.zIndex,position:"fixed",top:0,left:0,overflow:"hidden"}),this.$slider.addClass("parallax-slider").one("load",function(){i.naturalHeight&&i.naturalWidth||(i.naturalHeight=this.naturalHeight||this.height||1,i.naturalWidth=this.naturalWidth||this.width||1),i.aspectRatio=i.naturalWidth/i.naturalHeight,d.isSetup||d.setup(),d.sliders.push(i),d.isFresh=!1,d.requestRender()}),e||(this.$slider[0].src=this.imageSrc),(this.naturalHeight&&this.naturalWidth||this.$slider[0].complete||0<t.length)&&this.$slider.trigger("load")}!function(){for(var s=0,t=["ms","moz","webkit","o"],e=0;e<t.length&&!n.requestAnimationFrame;++e)n.requestAnimationFrame=n[t[e]+"RequestAnimationFrame"],n.cancelAnimationFrame=n[t[e]+"CancelAnimationFrame"]||n[t[e]+"CancelRequestAnimationFrame"];n.requestAnimationFrame||(n.requestAnimationFrame=function(t){var e=(new Date).getTime(),i=Math.max(0,16-(e-s)),o=n.setTimeout(function(){t(e+i)},i);return s=e+i,o}),n.cancelAnimationFrame||(n.cancelAnimationFrame=function(t){clearTimeout(t)})}(),r.extend(d.prototype,{speed:.2,bleed:0,zIndex:-100,iosFix:!0,androidFix:!0,position:"center",overScrollFix:!1,mirrorContainer:"body",refresh:function(){this.boxWidth=this.$element.outerWidth(),this.boxHeight=this.$element.outerHeight()+2*this.bleed,this.boxOffsetTop=this.$element.offset().top-this.bleed,this.boxOffsetLeft=this.$element.offset().left,this.boxOffsetBottom=this.boxOffsetTop+this.boxHeight;var t,e=d.winHeight,i=d.docHeight,i=Math.min(this.boxOffsetTop,i-e),e=Math.max(this.boxOffsetTop+this.boxHeight-e,0),e=this.boxHeight+(i-e)*(1-this.speed)|0,i=(this.boxOffsetTop-i)*(1-this.speed)|0;e*this.aspectRatio>=this.boxWidth?(this.imageWidth=e*this.aspectRatio|0,this.imageHeight=e,this.offsetBaseTop=i,t=this.imageWidth-this.boxWidth,"left"==this.positionX?this.offsetLeft=0:"right"==this.positionX?this.offsetLeft=-t:isNaN(this.positionX)?this.offsetLeft=-t/2|0:this.offsetLeft=Math.max(this.positionX,-t)):(this.imageWidth=this.boxWidth,this.imageHeight=this.boxWidth/this.aspectRatio|0,this.offsetLeft=0,t=this.imageHeight-e,"top"==this.positionY?this.offsetBaseTop=i:"bottom"==this.positionY?this.offsetBaseTop=i-t:isNaN(this.positionY)?this.offsetBaseTop=i-t/2|0:this.offsetBaseTop=i+Math.max(this.positionY,-t))},render:function(){var t=d.scrollTop,e=d.scrollLeft,i=this.overScrollFix?d.overScroll:0,o=t+d.winHeight;this.boxOffsetBottom>t&&this.boxOffsetTop<=o?(this.visibility="visible",this.mirrorTop=this.boxOffsetTop-t,this.mirrorLeft=this.boxOffsetLeft-e,this.offsetTop=this.offsetBaseTop-this.mirrorTop*(1-this.speed)):this.visibility="hidden",this.$mirror.css({transform:"translate3d("+this.mirrorLeft+"px, "+(this.mirrorTop-i)+"px, 0px)",visibility:this.visibility,height:this.boxHeight,width:this.boxWidth}),this.$slider.css({transform:"translate3d("+this.offsetLeft+"px, "+this.offsetTop+"px, 0px)",position:"absolute",height:this.imageHeight,width:this.imageWidth,maxWidth:"none"})}}),r.extend(d,{scrollTop:0,scrollLeft:0,winHeight:0,winWidth:0,docHeight:1<<30,docWidth:1<<30,sliders:[],isReady:!1,isFresh:!1,isBusy:!1,setup:function(){var e,t,o,i,s,a;this.isReady||(e=this,t=r(l),o=r(n),i=function(){d.winHeight=o.height(),d.winWidth=o.width(),d.docHeight=t.height(),d.docWidth=t.width()},s=function(){var t=o.scrollTop(),e=d.docHeight-d.winHeight,i=d.docWidth-d.winWidth;d.scrollTop=Math.max(0,Math.min(e,t)),d.scrollLeft=Math.max(0,Math.min(i,o.scrollLeft())),d.overScroll=Math.max(t-e,Math.min(t,0))},o.on("resize.px.parallax load.px.parallax",function(){i(),e.refresh(),d.isFresh=!1,d.requestRender()}).on("scroll.px.parallax load.px.parallax",function(){s(),d.requestRender()}),i(),s(),this.isReady=!0,a=-1,function t(){if(a==n.pageYOffset)return n.requestAnimationFrame(t),!1;a=n.pageYOffset,e.render(),n.requestAnimationFrame(t)}())},configure:function(t){"object"==typeof t&&(delete t.refresh,delete t.render,r.extend(this.prototype,t))},refresh:function(){r.each(this.sliders,function(){this.refresh()}),this.isFresh=!0},render:function(){this.isFresh||this.refresh(),r.each(this.sliders,function(){this.render()})},requestRender:function(){this.render(),this.isBusy=!1},destroy:function(t){var e,i=r(t).data("px.parallax");for(i.$mirror.remove(),e=0;e<this.sliders.length;e+=1)this.sliders[e]==i&&this.sliders.splice(e,1);r(t).data("px.parallax",!1),0===this.sliders.length&&(r(n).off("scroll.px.parallax resize.px.parallax load.px.parallax"),this.isReady=!1,d.isSetup=!1)}});var t=r.fn.parallax;r.fn.parallax=function(i){return this.each(function(){var t=r(this),e="object"==typeof i&&i;this==n||this==l||t.is("body")?d.configure(e):t.data("px.parallax")?"object"==typeof i&&r.extend(t.data("px.parallax"),e):(e=r.extend({},t.data(),e),t.data("px.parallax",new d(this,e))),"string"==typeof i&&("destroy"==i?d.destroy(this):d[i]())})},r.fn.parallax.Constructor=d,r.fn.parallax.noConflict=function(){return r.fn.parallax=t,this},r(function(){r('[data-parallax="scroll"]').parallax()})}(jQuery,window,document)},500)});